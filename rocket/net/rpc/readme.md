# 自定义协议格式(TInyPB协议)

## 1 为什么要自定义协议格式
既然用了 Protobuf 做序列化,为什么不直接把序列化后的结果直接发送,而要在上面再自定义一些字段?

1. 为了方便分割请求:因为 portobuf 后的结果是一串无法辨别的字节流,无法区分哪里是开始或者结束,比如说吧两个 Message 对象序列化后的结果排在一起,甚至无法分开这两个请求,在 TCP 传输是按照字节流传输,没有包的概念,因此应用层更无法区分了  
2. 为了定位:加上 MsgID 等信息,能帮助我们匹配一次 RPC 请求和响应,不会串包
3. 错误方便查错误: 加上错误信息,能很容易知道 RPC 失败的原因,方便 问题定位


## 2 协议信息

![Alt text](../../../imgs/screenshot-20231226-160934.png)

